<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
  </head>
  <body>
    <div id="root">
      <pre id="output"></pre>
    </div>
    <script src="./wasm_exec.js"></script>
    <script>
        const $output = document.getElementById("output");

        const go = new Go();

        // Write stdout to terminal.
        let outputBuf = '';
        const decoder = new TextDecoder("utf-8");
        globalThis.fs.writeSync = function(fd, buf) {
            outputBuf += decoder.decode(buf);
            $output.innerText = outputBuf;
            return buf.length;
        };

        WebAssembly.instantiateStreaming(fetch("./sdt.wasm"), go.importObject).then((result) => {
          go.argv = ["sdt", "b64", "hello"];
          go.run(result.instance);
        });
    </script>
  </body>
</html>
